(()=>{"use strict";class e{constructor(e,t,o,a){this.title=e,this.description=t,this.dueDate=o,this.priority=a,this.completion=!1}set updateTitle(e){this.title=e}set updateDescription(e){this.description=e}set updateDueDate(e){this.dueDate=e}set updatePriority(e){this.priority=e}}const t=document.querySelector("#hamburger"),o=document.querySelector("#plussign"),a=document.querySelector(".sidebar"),r=document.querySelector("#projectname"),d=document.querySelector("#addproject"),n=document.querySelector("#projectform"),i=document.querySelector("#projects"),c=document.querySelector("#select-priority"),l=(document.querySelector("#loadproject"),document.querySelector("#alltodo")),s=document.querySelector("#addtodo"),u=document.querySelector("#todotitle"),p=document.querySelector("#tododescription"),m=document.querySelector("#tododate"),y=document.querySelector("#todopriority"),g=document.querySelector("#todoform"),v=document.querySelector("#closeform"),h=document.querySelector("#projectchoice"),S=document.querySelector(".todocontainer"),q=document.querySelector("#lists"),$=document.querySelector("#todoheader");if(!localStorage.getItem("savedProjects")){const e=JSON.stringify([["Default",[]]]);localStorage.setItem("savedProjects",e)}const j=JSON.parse(localStorage.savedProjects),L=()=>{localStorage.setItem("savedProjects",JSON.stringify(j))},b=()=>{h.textContent="",i.textContent="";for(let e=0;e<j.length;e++){const t=document.createElement("option");t.setAttribute("value",e),t.textContent=`${j[e][0]}`,h.append(t)}for(let e=0;e<j.length;e++){const t=document.createElement("option");t.setAttribute("value",e),t.setAttribute("class","sidebar-project-choice"),t.innerHTML=`${j[e][0]} <p data-project="${e}"`,i.append(t)}};b();const f=(e,t)=>{const o=document.createElement("div");o.setAttribute("class","tododiv"),o.innerHTML=`<h3 class="todo-title" data-index="${t}">${j[e][1][t].title}</h3>\n  <br><hr><br>\n  <p class="todo-description" data-index="${t}">${j[e][1][t].description}</p>\n  <p class="todo-duedate" data-input="update" index="${t}">${j[e][1][t].dueDate}</p>\n  <p class="todo-priority" data-index="${t}">Priority: ${j[e][1][t].priority}</p>\n  <button data-input="delete" data-project=${e} data-index="${t}">Delete</button> \n  <br>\n  <button data-input="edit" data-project=${e} data-index="${t}">Edit</button>\n  <input data-project=${e} type="text" class="updatetitle" placeholder="Update title" data-index="${t}">\n  <input data-project=${e}  type="text" class="updatedescription" placeholder="Update Description" data-index="${t}">\n  <input data-project=${e} type="date" class="updateduedate" data-index="${t}">\n  <select data-project=${e}  class="updatepriority" data-index="${t}">\n      <option value="low">Low</option>\n      <option value="medium">Medium</option>\n      <option value="high">High</option>\n  </select>\n\n  <button data-input="submit" data-project=${e} data-index="${t}">submit</button>`,q.appendChild(o)};let x=!0,D=!1,E=!1;const k=()=>{!0===x?((()=>{q.innerHTML="";for(let e=0;e<j.length;e++)for(let t=0;t<j[e][1].length;t++)f(e,t)})(),$.textContent="All things todo..."):!0===D?((()=>{const e=i.value;q.innerHTML="";for(let t=0;t<j[e][1].length;t++)f(e,t)})(),(()=>{let e=i.value;$.innerHTML=`${j[e][0]} <i data-project=${e} \n  data-input="delete"class="material-icons">delete_forever</i>`})()):!0===E&&(()=>{const e=c.value;q.innerHTML="";for(let t=0;t<j.length;t++)for(let o=0;j[t][1].length;o++)j[t][1][o].priority===e&&f(t,o)})()};k(),s.addEventListener("click",(t=>{t.preventDefault();const o=h.value,a=new e(u.value,p.value,m.value,y.value);j[o][1].push(a),g.reset(),k(),document.querySelector(".modal").classList.toggle("modal-active"),L()})),d.addEventListener("click",(e=>{e.preventDefault(),j.push([r.value,[]]),n.reset(),b(),L()})),i.addEventListener("change",(()=>{x=!1,D=!0,E=!0,k()})),t.addEventListener("click",(()=>{a.classList.toggle("sidebar-hidden"),S.classList.toggle("todomargin"),S.classList.toggle("todo-adjust")})),o.addEventListener("click",(()=>{document.querySelector(".modal").classList.toggle("modal-active")})),v.addEventListener("click",(e=>{e.preventDefault(),document.querySelector(".modal").classList.toggle("modal-active")})),q.addEventListener("click",(e=>{const t=e.target.dataset.project,o=e.target.dataset.index,a=e.target.parentElement;"delete"===e.target.dataset.input?(j[t][1].splice(o,1),k(),L()):"submit"===e.target.dataset.input&&(j[t][1][o].updateTitle=a.querySelector(".updatetitle").value,j[t][1][o].updateDescription=a.querySelector(".updatedescription").value,j[t][1][o].updateDueDate=a.querySelector(".updateduedate").value,j[t][1][o].updatePriority=a.querySelector(".updatepriority").value,k(),L())})),l.addEventListener("click",(()=>{x=!0,D=!1,E=!1,k()})),c.addEventListener("change",(()=>{x=!1,D=!1,E=!0,k()})),$.addEventListener("click",(e=>{"delete"===e.target.dataset.input&&("0"===e.target.dataset.project?alert("Cannot delete default project"):(j.splice(e.target.dataset.project,1),L(),b(),x=!0,D=!1,E=!1,k()))}))})();